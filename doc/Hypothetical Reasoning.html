<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="doc.css" media="all">
		<title>
			claire : Hypothetical Reasoning
		</title>
		<style>
body {
        font-size: 14px;
        font-family: arial, Helvetica;
}

h1 { font-size: 25px; }
h2 { font-size: 20px; }

a[href] {
	border-bottom: 1px dotted grey;
	text-decoration: none
}

.doc_paragraph
{
        font-size: 14px;
        font-family: arial, helvetica;
}

.item_header { font-size: 10px; page-break-before: avoid; page-break-inside: avoid; page-break-after: avoid }

.item_index {
		white-space: pre;
        font-size: 11px;
        font-family: monaco, courier, mono-space;
}

.table_code {
		margin: 10px auto;
}

.doc_code {
    white-space: pre;
		padding-top: .1em;
		padding-bottom: .5em;
		background-color: #EEE;
		border: #AAA solid 1px;
        font-size: 11px;
        font-family: monaco, courier, mono-space;
}

.opt_usage {
		margin-left: 1em;
		margin-right: 1em;
		padding: .2em;
		background-color: #EEE;
		border: #AAA solid 1px;
        font-family: monaco, courier, mono-space;
	
}

.class_proto {
	vertical-align: top;
	text-align: right;
}

.class_proto_super {
	vertical-align: top;
	text-align: right;
}

.class_proto_slot {
	vertical-align: top;
	text-align: left;
}

</style>
	</head>
	<body><table width='100%' class='item_header'>
		<tr>
			<td width='33%' align='left' valign='bottom'><i><a href='Rules.html#4611703569012856434'>Rules</a></i></td>
			<td width='33%' align='center' valign='top'><i><a href='claire.index.html#__category_index__'>categories</a><br/><a href='claire.index.html#4611703569012789346'>Tables, Rules and Hypothetical Reasoning</a><br/><b>Hypothetical Reasoning</b>
				</i></td>
			<td width='33%' align='right' valign='bottom'><i>I/O, Modules and System Interface<br/><a href='Communication ports.html#4611703569012956018'>Communication ports</a></i></td>
		</tr>
	</table>
	<h2><span class=pretitle>&nbsp;</span>&nbsp;<a name='4611703569012945234'>Hypothetical Reasoning</a>
			</h2>
	<ul></ul><ul><li><font font-face='Courier' class='item_index'><a href='Hypothetical Reasoning.html#4611703569013514242'>backtrack</a>()<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='Hypothetical Reasoning.html#4611703569013514306'>backtrack</a>(<font color='green'>n</font><font color='blue'>:</font>integer)<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='Hypothetical Reasoning.html#4611703569013514194'>choice</a>()<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='Hypothetical Reasoning.html#4611703569013514386'>commit</a>()<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='Hypothetical Reasoning.html#4611703569013514562'>commit</a>(<font color='green'>n</font><font color='blue'>:</font>integer)<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='Hypothetical Reasoning.html#4611703569013637250'>contradiction!</a>()<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='Hypothetical Reasoning.html#4611703569013518802'>prealloc_list</a>(<font color='green'>t</font><font color='blue'>:</font>type, <font color='green'>n</font><font color='blue'>:</font>integer)<font color='blue'> -&gt; </font>list <font color='red'>[XL]</font></font></li><li><font font-face='Courier' class='item_index'><a href='Hypothetical Reasoning.html#4611703569013519810'>prealloc_set</a>(<font color='green'>t</font><font color='blue'>:</font>type, <font color='green'>n</font><font color='blue'>:</font>integer)<font color='blue'> -&gt; </font>set <font color='red'>[XL]</font></font></li><li><font font-face='Courier' class='item_index'><a href='Hypothetical Reasoning.html#4611703569013573042'>put_store</a>(<font color='green'>self</font><font color='blue'>:</font>property, <font color='green'>x</font><font color='blue'>:</font>object, <font color='green'>y</font><font color='blue'>:</font>any, <font color='green'>b</font><font color='blue'>:</font>boolean)<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='Hypothetical Reasoning.html#4611703569013508306'>store</a>(<font color='green'>rels</font><font color='blue'>:</font>listargs)<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='Hypothetical Reasoning.html#4611703569013508418'>store</a>(<font color='green'>v</font><font color='blue'>:</font>global_variable)<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='Hypothetical Reasoning.html#4611703569013508498'>store</a>(<font color='green'>a</font><font color='blue'>:</font>array, <font color='green'>n</font><font color='blue'>:</font>integer, <font color='green'>v</font><font color='blue'>:</font>any, <font color='green'>b</font><font color='blue'>:</font>boolean)<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='Hypothetical Reasoning.html#4611703569013508754'>store</a>(<font color='green'>l</font><font color='blue'>:</font>list, <font color='green'>n</font><font color='blue'>:</font>integer, <font color='green'>v</font><font color='blue'>:</font>any, <font color='green'>b</font><font color='blue'>:</font>boolean)<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='Hypothetical Reasoning.html#4611703569013514130'>world?</a>()<font color='blue'> -&gt; </font>integer</font></li></ul><p align='justify' class='doc_paragraph'> In addition to <a href='Rules.html#4611703569012856434'><font color='#'>rules</font></a>, CLAIRE also provides the ability to do some hypothetical reasoning.
 It is indeed possible to make hypotheses on part of the knowledge (the database of relations)
 of CLAIRE, and to change them whenever we come to a dead-end. This possibility to <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>
 successive versions of the database and to come back to a previous one is called the world
 mechanism (each version is called a world). The <a href='Calls and Slot Access.html#4611703569011817362'><font color='#'>slots</font></a> or <a href='Tables.html#4611703569012764210'><font color='#'>tables</font></a> x on which hypothetical
 reasoning will be done need to be specified with the declaration <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(x). For instance&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(age,friends,fib) &lt;=&gt; <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(age), <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(friends), <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(fib)
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> Each <a href='Dates and Times.html#4611703569011619458'><font color='#'>time</font></a> we ask CLAIRE to create a <a href='Classes.html#4611703569013711154'><font color='#'>new</font></a> world, CLAIRE saves the status of <a href='Tables.html#4611703569012764210'><font color='#'>tables</font></a> and <a href='Calls and Slot Access.html#4611703569011817362'><font color='#'>slots</font></a>
 declared with the <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a> command. Worlds are represented with <a href='Integers and Floats.html#4611703569011617938'><font color='#'>numbers</font></a>, and creating a <a href='Classes.html#4611703569013711154'><font color='#'>new</font></a> world
 is done with <a href='Hypothetical Reasoning.html#4611703569013514194'><font color='#'>choice</font></a>(). Returning to the previous world is done with <a href='Hypothetical Reasoning.html#4611703569013514306'><font color='#'>backtrack</font></a>(). Returning to
 a previous world n is done with <a href='Hypothetical Reasoning.html#4611703569013514306'><font color='#'>backtrack</font></a>(n). Worlds are organized into a stack (sorry, you
 cannot explore two worlds at the same <a href='Dates and Times.html#4611703569011619458'><font color='#'>time</font></a>) so that save/restore <a href='Selectors_comma Properties and Operations.html#4611703569012697490'><font color='#'>operations</font></a> are very fast.
 The current world that is being used can be found with <a href='Hypothetical Reasoning.html#4611703569013514130'><font color='#'>world?</font></a>(), which returns an <a href='Integers and Floats.html#4611703569011617938'><font color='#'>integer</font></a>.
 </p>
									<table align='center' width='80%'>
									<tr><td><p align='justify' class='doc_paragraph'>
										<b>Definition : </b><i>A world is a virtual <a href='Strings.html#4611703569013480098'><font color='#'>copy</font></a> of the defeasible part of the <a href='Objects and Entities.html#4611703569011622050'><font color='#'>object</font></a> database. The <a href='Objects and Entities.html#4611703569011622050'><font color='#'>object</font></a>
 database (<a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>set</font></a> of <a href='Calls and Slot Access.html#4611703569011817362'><font color='#'>slots</font></a>, <a href='Tables.html#4611703569012764210'><font color='#'>tables</font></a> and <a href='Global Variables and Constants.html#4611703569013372722'><font color='#'>global</font></a> variables) is divided into the defeasible part and
 the stable part using the <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a> declaration. Defeasible means that <a href='Updates.html#4611703569011821746'><font color='#'>updates</font></a> performed to a
 defeasible relation or variable can be undone later; r is defeasible if <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(r) has been
 declared. Creating a world (<a href='Hypothetical Reasoning.html#4611703569013514194'><font color='#'>choice</font></a>) means storing the current status of the defeasible
 database (a delta-storage using the previous world as a reference). Returning to the
 previous world (<a href='Hypothetical Reasoning.html#4611703569013514306'><font color='#'>backtrack</font></a>) is just restoring the defeasible database to its previously
 stored state.
 </i></p></td></tr></table>
									<p align='justify' class='doc_paragraph'> In addition, you may accept the hypothetical changes that you made within a world while
 removing the world and keeping the changes. This is done with the <a href='Hypothetical Reasoning.html#4611703569013514562'><font color='#'>commit</font></a> <a href='Methods.html#4611703569012232658'><font color='#'>methods</font></a>.
 <a href='Hypothetical Reasoning.html#4611703569013514562'><font color='#'>commit</font></a>() decreases the world counter by one, while keeping the <a href='Updates.html#4611703569011821746'><font color='#'>updates</font></a> that were made
 in the current world. It can be seen as a collapse of the current world and the previous
 world. <a href='Hypothetical Reasoning.html#4611703569013514562'><font color='#'>commit</font></a>(n) repeats <a href='Hypothetical Reasoning.html#4611703569013514562'><font color='#'>commit</font></a>() until the current world is n. Notice that this
 "collapse" will simply make the <a href='Updates.html#4611703569011821746'><font color='#'>updates</font></a> that were made in the current world (n) look like
 they were made in the previous world (n - 1); thus, these <a href='Updates.html#4611703569011821746'><font color='#'>updates</font></a> are still defeasible.</p><p align='justify' class='doc_paragraph'> Defeasible <a href='Updates.html#4611703569011821746'><font color='#'>updates</font></a> are fairly optimized in CLAIRE, with an emphasis on minimal book-keeping
 to ensure better performance. Roughly speaking, CLAIRE stores a pair of pointers for each
 defeasible <a href='Updates.html#4611703569011821746'><font color='#'>update</font></a> in the world stack. There are (rare) cases where it may be interesting to
 record more information to avoid overloading the trailing stack. For instance, trailing
 information is added to the stack for each <a href='Updates.html#4611703569011821746'><font color='#'>update</font></a> even if the current world has <a href='Objects and Entities.html#4611703569013709858'><font color='#'>not</font></a> changed.
 This strategy is actually faster than using a more sophisticated book-keeping, but may yield
 a world stack overflow.</p><p align='justify' class='doc_paragraph'> For instance, here is a simple program that solves the n queens problem
 (the problem is the following: how many queens can one place on a chessboard so that none are
 in situation of chess, given that a queen can move vertically, horizontally and diagonally
 in both ways ?)&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> column[n:(1 .. 8)]&nbsp;: (1 .. 8)&nbsp;:= unknown
 possible[x:(1 .. 8), y:(1 .. 8)]&nbsp;: boolean&nbsp;:= true
 <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(column, possible)

 r1()&nbsp;:: <a href='Rules.html#4611703569012856434'><font color='#'>rule</font></a>(column[x]&nbsp;:= z
 			=&gt; for y in ((1 .. 8) but x) possible[y,z]&nbsp;:= false)
 r2()&nbsp;:: <a href='Rules.html#4611703569012856434'><font color='#'>rule</font></a>(column[x]&nbsp;:= z
 			=&gt; let d&nbsp;:= x + z
 				in for y in (<a href='Lists_comma Sets and Tuples.html#4611703569013715986'><font color='#'>max</font></a>(1,d - 8) .. <a href='Lists_comma Sets and Tuples.html#4611703569013715906'><font color='#'>min</font></a>(d - 1, 8))
 					possible[y,d - y]&nbsp;:= false )
 r3()&nbsp;:: <a href='Rules.html#4611703569012856434'><font color='#'>rule</font></a>(column[x]&nbsp;:= z
 			=&gt; let d&nbsp;:= z - x
 				in for y in (<a href='Lists_comma Sets and Tuples.html#4611703569013715986'><font color='#'>max</font></a>(1,1 - d) .. <a href='Lists_comma Sets and Tuples.html#4611703569013715906'><font color='#'>min</font></a>(8,8 - d))
 					possible[y,y + d]&nbsp;:= false)

 queens(n:(0 .. 8))&nbsp;: boolean
 	-&gt; (if (n = 0) true
 		else exists(p in (1 .. 8) | (possible[n,p] &amp;
 					branch((column[n]&nbsp;:= p, queens(n - 1))))))

 (queens(8))
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> In this program queens(n) returns true if it is possible to place n queens.
 Obviously there can be at most one queen per line, so the purpose is to <a href='Strings.html#4611703569013486914'><font color='#'>find</font></a> a
 column for each queen in each line&nbsp;: this is represented by the column <a href='Tables.html#4611703569012764210'><font color='#'>table</font></a>. So,
 we have eight levels of decision in this problem (finding a line for each of the
 eight queens). The search tree (these imbricated choices) is represented by
 the stack of the recursive <a href='Calls and Slot Access.html#4611703569011817362'><font color='#'>calls</font></a> to the <a href='Methods.html#4611703569012232658'><font color='#'>method</font></a> queens. At each level of the
 tree, each <a href='Dates and Times.html#4611703569011619458'><font color='#'>time</font></a> a decision is made (an affectation to the <a href='Tables.html#4611703569012764210'><font color='#'>table</font></a> column), a <a href='Classes.html#4611703569013711154'><font color='#'>new</font></a> world
 is created, so that we can <a href='Hypothetical Reasoning.html#4611703569013514306'><font color='#'>backtrack</font></a> (go back to previous decision level) if this
 hypothesis (this branch of the tree) leads to a failure.</p><p align='justify' class='doc_paragraph'> Note that the <a href='Tables.html#4611703569012764210'><font color='#'>table</font></a> possible, which tells us whether the n<sup>th </sup>queen can be <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>set</font></a> on the p<sup>th </sup> line, is filled by means of <a href='Rules.html#4611703569012856434'><font color='#'>rules</font></a> triggered by column (declared event) and that both
 possible and column are declared <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a> so that the decisions taken in worlds that have been
 <a href='Strings.html#4611703569013494258'><font color='#'>left</font></a> are undone (this avoids to keep track of decisions taken under hypotheses that have
 been dismissed since).</p><p align='justify' class='doc_paragraph'> <a href='Updates.html#4611703569011821746'><font color='#'>Updates</font></a> on <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>lists</font></a> can also be "stored" on worlds so that they become defeasible.
 Instead of using the <a href='Communication ports.html#4611703569013988354'><font color='#'>nth</font></a>= <a href='Methods.html#4611703569012232658'><font color='#'>method</font></a>, one can use the <a href='Methods.html#4611703569012232658'><font color='#'>method</font></a> <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(l,x,v,b) that places
 the value v in l[x] and stores the <a href='Updates.html#4611703569011821746'><font color='#'>update</font></a> if b is true. In this case, a return to a
 previous world will restore the previous value of l[x]. If the boolean value is always true,
 the shorter form <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(l,x,y) may be used. Here is a typical use of <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(l,n,y,l[n] != y)
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> This is often necessary for <a href='Tables.html#4611703569012764210'><font color='#'>tables</font></a> with range <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>list</font></a> or <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>set</font></a>. For instance, consider the
 following&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> A[i:(1 .. 10)]&nbsp;: <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>tuple</font></a>(<a href='Integers and Floats.html#4611703569011617938'><font color='#'>integer</font></a>,<a href='Integers and Floats.html#4611703569011617938'><font color='#'>integer</font></a>,<a href='Integers and Floats.html#4611703569011617938'><font color='#'>integer</font></a>)&nbsp;:= list&lt;integer&gt;(0,0,0)
 (let l&nbsp;:= A[x]
 in (l[1]&nbsp;:= 3, l[3]&nbsp;:= 3))
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> even if <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(A) is declared, the manipulation on l will <a href='Objects and Entities.html#4611703569013709858'><font color='#'>not</font></a> be recorded by the world
 mechanism. You would need to <a href='Classes.html#4611703569013572514'><font color='#'>write</font></a>&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> A[x]&nbsp;:= <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>list</font></a>(3, A[x][2], 3)
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> Using <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>, you can use the original (and more space-efficient) pattern and <a href='Classes.html#4611703569013572514'><font color='#'>write</font></a>&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> (let l&nbsp;:= A[x]
 in (<a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(l,1,3), <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(l,3,3)))
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> There is another problem with the previous definition. The expression given as a default
 in a <a href='Tables.html#4611703569012764210'><font color='#'>table</font></a> definition is evaluated only once and the value is stored. Thus the same
 list&lt;integer&gt;(0,0,0) will be used for all A[x]. In this case, which is a default value
 that will support side-effects, it is better to introduce an explicit initialization of the <a href='Tables.html#4611703569012764210'><font color='#'>table</font></a>&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> (for i in (1 .. 10) A[i]&nbsp;:= list&lt;integer&gt;(0,0,0))
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> There are two <a href='Selectors_comma Properties and Operations.html#4611703569012697490'><font color='#'>operations</font></a> that are supported in a defeasible manner: direct replacement of the
 i<sup>th</sup>element of l with y (using <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(l,i,y)) and adding a <a href='Classes.html#4611703569013711154'><font color='#'>new</font></a> element at the <a href='Modules.html#4611703569013476402'><font color='#'>end</font></a>
 of the <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>list</font></a> (using <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(l,y)). All other <a href='Selectors_comma Properties and Operations.html#4611703569012697490'><font color='#'>operations</font></a>, such as <a href='Communication ports.html#4611703569013988354'><font color='#'>nth</font></a>+ or <a href='Lists_comma Sets and Tuples.html#4611703569013500066'><font color='#'>nth-</font></a> are <a href='Objects and Entities.html#4611703569013709858'><font color='#'>not</font></a> defeasible.
 The addition of a <a href='Classes.html#4611703569013711154'><font color='#'>new</font></a> element is interesting because it either returns a <a href='Classes.html#4611703569013711154'><font color='#'>new</font></a> <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>list</font></a> or perform a
 defeasible side-effect. Therefore, one must also make sure that the assignment of the value of
 <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(l,x) is also made in a defeasible manner (e.g., placing the value in a defeasible <a href='Global Variables and Constants.html#4611703569013372722'><font color='#'>global</font></a>
 variable). To perform an <a href='Selectors_comma Properties and Operations.html#4611703569012697490'><font color='#'>operation</font></a> like <a href='Communication ports.html#4611703569013988354'><font color='#'>nth</font></a>+ or <a href='Classes.html#4611703569013572802'><font color='#'>delete</font></a> on a <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>list</font></a> in a defeasible manner, one
 usually needs to use an explicit <a href='Strings.html#4611703569013480098'><font color='#'>copy</font></a> (to protect the original <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>list</font></a>) and <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a> the result using
 a defeasible <a href='Updates.html#4611703569011821746'><font color='#'>update</font></a> (cf. the second <a href='Updates.html#4611703569011821746'><font color='#'>update</font></a> in the next example).</p><p align='justify' class='doc_paragraph'> It is also important to notice that the management of defeasible <a href='Updates.html#4611703569011821746'><font color='#'>updates</font></a> is done at the
 relation level and <a href='Objects and Entities.html#4611703569013709858'><font color='#'>not</font></a> the <a href='Objects and Entities.html#4611703569011622050'><font color='#'>object</font></a> level. Suppose that we have the following&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> C1 &lt;: <a href='Objects and Entities.html#4611703569011622050'><font color='#'>object</font></a>(a:list&lt;any&gt;, b:<a href='Integers and Floats.html#4611703569011617938'><font color='#'>integer</font></a>)
 C2 &lt;: thing(c:C1)
 <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(c,a)
 P&nbsp;:: C1()
 P.c&nbsp;:= C2(a = list&lt;any&gt;(1,2,3) , b = 0) // defeasible but the C2 <a href='Objects and Entities.html#4611703569011622050'><font color='#'>object</font></a> remains
 P.c.a&nbsp;:= <a href='Classes.html#4611703569013572802'><font color='#'>delete</font></a>(<a href='Strings.html#4611703569013480098'><font color='#'>copy</font></a>(P.c.a), 2) // this is defeasible
 P.c.b&nbsp;:= 2  // <a href='Objects and Entities.html#4611703569013709858'><font color='#'>not</font></a> defeasible
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> The first two <a href='Updates.html#4611703569011821746'><font color='#'>updates</font></a> are defeasible but the third is <a href='Objects and Entities.html#4611703569013709858'><font color='#'>not</font></a>, because <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(b) has <a href='Objects and Entities.html#4611703569013709858'><font color='#'>not</font></a> been declared.
 It is also possible to make a defeasible <a href='Updates.html#4611703569011821746'><font color='#'>update</font></a> on a regular <a href='Selectors_comma Properties and Operations.html#4611703569012697490'><font color='#'>property</font></a> using <a href='Hypothetical Reasoning.html#4611703569013573042'><font color='#'>put_store</font></a>. It is worth
 noticing that hypothetical reasoning.</p><a name='4611703569013514242'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='backtrack'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Hypothetical Reasoning.html#4611703569012945234'>Hypothetical Reasoning</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Kernel method</i></td>
	</tr></table><h3>backtrack()<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> backtrack() pops the current <a href='Hypothetical Reasoning.html#4611703569012945234'><font color='#'>world</font></a> and returns to the previous one.</p><a name='4611703569013514306'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='backtrack'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Hypothetical Reasoning.html#4611703569012945234'>Hypothetical Reasoning</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Kernel method</i></td>
	</tr></table><h3>backtrack(<font color='green'>n</font><font color='blue'>:</font>integer)<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> backtrack(<b>n</b>) returns to the <a href='Hypothetical Reasoning.html#4611703569012945234'><font color='#'>world</font></a> numbered with <b>n</b>, and pops all the intermediary <a href='Hypothetical Reasoning.html#4611703569012945234'><font color='#'>worlds</font></a>.</p><a name='4611703569013514194'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='choice'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Hypothetical Reasoning.html#4611703569012945234'>Hypothetical Reasoning</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Kernel method</i></td>
	</tr></table><h3>choice()<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> choice() creates a <a href='Classes.html#4611703569013711154'><font color='#'>new</font></a> <a href='Hypothetical Reasoning.html#4611703569012945234'><font color='#'>world</font></a> and steps into it.</p><a name='4611703569013514386'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='commit'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Hypothetical Reasoning.html#4611703569012945234'>Hypothetical Reasoning</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Kernel method</i></td>
	</tr></table><h3>commit()<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> The <a href='Methods.html#4611703569012232658'><font color='#'>method</font></a> commit() returns to the previous <a href='Hypothetical Reasoning.html#4611703569012945234'><font color='#'>world</font></a> but carries the <a href='Updates.html#4611703569011821746'><font color='#'>updates</font></a> that
 were made within the current <a href='Hypothetical Reasoning.html#4611703569012945234'><font color='#'>world</font></a>; these <a href='Updates.html#4611703569011821746'><font color='#'>updates</font></a> now belong to the previous <a href='Hypothetical Reasoning.html#4611703569012945234'><font color='#'>world</font></a>
 and another <a href='Calls and Slot Access.html#4611703569013635570'><font color='#'>call</font></a> to <a href='Hypothetical Reasoning.html#4611703569013514306'><font color='#'>backtrack</font></a>() would undo them.</p><a name='4611703569013514562'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='commit'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Hypothetical Reasoning.html#4611703569012945234'>Hypothetical Reasoning</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Kernel method</i></td>
	</tr></table><h3>commit(<font color='green'>n</font><font color='blue'>:</font>integer)<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> commit(<b>n</b>) returns to the <a href='Hypothetical Reasoning.html#4611703569012945234'><font color='#'>world</font></a> numbered with <b>n</b> through successive applications of
 commit().</p><a name='4611703569013637250'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='contradiction!'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Hypothetical Reasoning.html#4611703569012945234'>Hypothetical Reasoning</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Core method</i></td>
	</tr></table><h3>contradiction!()<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> contradiction!() throws a contradiction. contradiction!() uses a
 unique instance of the contradiction <a href='Exception Handling.html#4611703569012183794'><font color='#'>exception</font></a> <a href='Classes.html#4611703569011633570'><font color='#'>class</font></a> such to save
 a little memory.</p><a name='4611703569013518802'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='prealloc_list'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Hypothetical Reasoning.html#4611703569012945234'>Hypothetical Reasoning</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i><font color='red'>[XL]</font> Kernel method</i></td>
	</tr></table><h3>prealloc_list(<font color='green'>t</font><font color='blue'>:</font>type, <font color='green'>n</font><font color='blue'>:</font>integer)<font color='blue'> -&gt; </font>list</h3><p align='justify' class='doc_paragraph'> XL CLAIRE provides a convenient way to (pre)allocate defeasible <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>lists</font></a> in a <a href='Classes.html#4611703569011633570'><font color='#'>class</font></a>
 prototypes. Starting with CLAIRE 3, the content of a defeasible <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>list</font></a> have to be
 allocated prior to perform <a href='Updates.html#4611703569011821746'><font color='#'>updates</font></a> on it. prealloc_list(<b>t</b>,<b>n</b>) allocates an empty <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>list</font></a>
 for a <a href='Classes.html#4611703569011633570'><font color='#'>class</font></a> prototype that will automatically initialize a <a href='Calls and Slot Access.html#4611703569011817362'><font color='#'>slot</font></a> with a preallocated
 <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>list</font></a> of <b>n</b> elements and initially empty&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> lesson &lt;: ephemeral_object(
 			students:<a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>list</font></a>[student] = prealloc_list(student, 100))

 (<a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(students))

 lesson!()&nbsp;: lesson -&gt; lesson()
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> notice that the <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>list</font></a> owned by the <a href='Classes.html#4611703569011633570'><font color='#'>class</font></a> prototype is actually empty and that it becomes
 allocated only once it is copied (as done by <a href='Instantiation.html#4611703569012154578'><font color='#'>instantiation</font></a> process).</p><a name='4611703569013519810'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='prealloc_set'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Hypothetical Reasoning.html#4611703569012945234'>Hypothetical Reasoning</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i><font color='red'>[XL]</font> Kernel method</i></td>
	</tr></table><h3>prealloc_set(<font color='green'>t</font><font color='blue'>:</font>type, <font color='green'>n</font><font color='blue'>:</font>integer)<font color='blue'> -&gt; </font>set</h3><p align='justify' class='doc_paragraph'> preallocate a <a href='Lists_comma Sets and Tuples.html#4611703569011833826'><font color='#'>set</font></a> in a similar way to <a href='Hypothetical Reasoning.html#4611703569013518802'><font color='#'>prealloc_list</font></a>.</p><a name='4611703569013573042'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='put_store'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Hypothetical Reasoning.html#4611703569012945234'>Hypothetical Reasoning</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Core method</i></td>
	</tr></table><h3>put_store(<font color='green'>self</font><font color='blue'>:</font>property, <font color='green'>x</font><font color='blue'>:</font>object, <font color='green'>y</font><font color='blue'>:</font>any, <font color='green'>b</font><font color='blue'>:</font>boolean)<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> put_store(r,<b>x</b>,v,<b>b</b>) is equivalent to <a href='Symbols.html#4611703569013501458'><font color='#'>put</font></a>(r,<b>x</b>,v) but also stores this <a href='Updates.html#4611703569011821746'><font color='#'>update</font></a>
 in the current <a href='Hypothetical Reasoning.html#4611703569012945234'><font color='#'>world</font></a> if <b>b</b> is true. The <a href='Lists_comma Sets and Tuples.html#4611703569013716946'><font color='#'>difference</font></a> with the use of the
 statement <a href='Hypothetical Reasoning.html#4611703569013508754'><font color='#'>store</font></a>(p) is that put_store allows the user to control precisely
 which <a href='Updates.html#4611703569011821746'><font color='#'>update</font></a> should be backtracked.</p><a name='4611703569013508306'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='store'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Hypothetical Reasoning.html#4611703569012945234'>Hypothetical Reasoning</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Kernel method</i></td>
	</tr></table><h3>store(<font color='green'>rels</font><font color='blue'>:</font>listargs)<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> store(r1, r2, ...) declares the relations (<a href='Selectors_comma Properties and Operations.html#4611703569012697490'><font color='#'>properties</font></a> or <a href='array.html#4611703569012199810'><font color='#'>arrays</font></a>) as defeasible
 (using the <a href='Hypothetical Reasoning.html#4611703569012945234'><font color='#'>world</font></a> mechanism)</p><a name='4611703569013508418'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='store'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Hypothetical Reasoning.html#4611703569012945234'>Hypothetical Reasoning</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Kernel method</i></td>
	</tr></table><h3>store(<font color='green'>v</font><font color='blue'>:</font>global_variable)<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> store(<b>v</b>) declares the <a href='Global Variables and Constants.html#4611703569013372722'><font color='#'>global</font></a> variable <b>v</b> as defeasible
 (using the <a href='Hypothetical Reasoning.html#4611703569012945234'><font color='#'>world</font></a> mechanism).</p><a name='4611703569013508498'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='store'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Hypothetical Reasoning.html#4611703569012945234'>Hypothetical Reasoning</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Kernel method</i></td>
	</tr></table><h3>store(<font color='green'>a</font><font color='blue'>:</font>array, <font color='green'>n</font><font color='blue'>:</font>integer, <font color='green'>v</font><font color='blue'>:</font>any, <font color='green'>b</font><font color='blue'>:</font>boolean)<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> store(<b>a</b>, <b>n</b>, <b>v</b>, <b>b</b>) is equivalent to <b>a</b>[<b>n</b>]&nbsp;:= <b>v</b> but also stores
 this <a href='Updates.html#4611703569011821746'><font color='#'>update</font></a> in the current <a href='Hypothetical Reasoning.html#4611703569012945234'><font color='#'>world</font></a> if <b>b</b> is true. As <b>a</b> syntactical convenience,
 the argument <b>b</b> may be omitted if it is true. Note that there is <b>a</b> similar <a href='Methods.html#4611703569012232658'><font color='#'>method</font></a>
 for <a href='Selectors_comma Properties and Operations.html#4611703569012697490'><font color='#'>properties</font></a> called <a href='Hypothetical Reasoning.html#4611703569013573042'><font color='#'>put_store</font></a>.</p><a name='4611703569013508754'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='store'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Hypothetical Reasoning.html#4611703569012945234'>Hypothetical Reasoning</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Kernel method</i></td>
	</tr></table><h3>store(<font color='green'>l</font><font color='blue'>:</font>list, <font color='green'>n</font><font color='blue'>:</font>integer, <font color='green'>v</font><font color='blue'>:</font>any, <font color='green'>b</font><font color='blue'>:</font>boolean)<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> store(<b>l</b>, <b>n</b>, <b>v</b>, <b>b</b>) is equivalent to <b>l</b>[<b>n</b>]&nbsp;:= <b>v</b> but also stores
 this <a href='Updates.html#4611703569011821746'><font color='#'>update</font></a> in the current <a href='Hypothetical Reasoning.html#4611703569012945234'><font color='#'>world</font></a> if <b>b</b> is true. As a syntactical convenience,
 the argument <b>b</b> may be omitted if it is true. Note that there is a similar <a href='Methods.html#4611703569012232658'><font color='#'>method</font></a>
 for <a href='Selectors_comma Properties and Operations.html#4611703569012697490'><font color='#'>properties</font></a> called <a href='Hypothetical Reasoning.html#4611703569013573042'><font color='#'>put_store</font></a>.</p><a name='4611703569013514130'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='world?'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Hypothetical Reasoning.html#4611703569012945234'>Hypothetical Reasoning</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Kernel method</i></td>
	</tr></table><h3>world?()<font color='blue'> -&gt; </font>integer</h3><p align='justify' class='doc_paragraph'> world?() returns the index of the current <a href='Hypothetical Reasoning.html#4611703569012945234'><font color='#'>world</font></a>.</p></body>
	</html>