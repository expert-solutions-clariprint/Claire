<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="doc.css" media="all">
		<title>
			claire : Loops
		</title>
		<style>
body {
        font-size: 14px;
        font-family: arial, Helvetica;
}

h1 { font-size: 25px; }
h2 { font-size: 20px; }

a[href] {
	border-bottom: 1px dotted grey;
	text-decoration: none
}

.doc_paragraph
{
        font-size: 14px;
        font-family: arial, helvetica;
}

.item_header { font-size: 10px; page-break-before: avoid; page-break-inside: avoid; page-break-after: avoid }

.item_index {
		white-space: pre;
        font-size: 11px;
        font-family: monaco, courier, mono-space;
}

.table_code {
		margin: 10px auto;
}

.doc_code {
    white-space: pre;
		padding-top: .1em;
		padding-bottom: .5em;
		background-color: #EEE;
		border: #AAA solid 1px;
        font-size: 11px;
        font-family: monaco, courier, mono-space;
}

.opt_usage {
		margin-left: 1em;
		margin-right: 1em;
		padding: .2em;
		background-color: #EEE;
		border: #AAA solid 1px;
        font-family: monaco, courier, mono-space;
	
}

.class_proto {
	vertical-align: top;
	text-align: right;
}

.class_proto_super {
	vertical-align: top;
	text-align: right;
}

.class_proto_slot {
	vertical-align: top;
	text-align: left;
}

</style>
	</head>
	<body><table width='100%' class='item_header'>
		<tr>
			<td width='33%' align='left' valign='bottom'><i><a href='Conditionals.html#4611703575761595106'>Conditionals</a></i></td>
			<td width='33%' align='center' valign='top'><i><a href='claire.index.html#__category_index__'>categories</a><br/><a href='claire.index.html#4611703575761536242'>Lists, Sets and Instructions</a><br/><b>Loops</b>
				</i></td>
			<td width='33%' align='right' valign='bottom'><i><a href='Instantiation.html#4611703575761838546'>Instantiation</a></i></td>
		</tr>
	</table>
	<h2><span class=pretitle>&nbsp;</span>&nbsp;<a name='4611703575761697778'>Loops</a>
			</h2>
	<ul></ul><ul></ul><p align='justify' class='doc_paragraph'> CLAIRE supports two <a href='Types.html#4611703575761920178'><font color='#'>types</font></a> of <a href='Loops.html#4611703575761697778'><font color='#'>loops</font></a>: iteration and conditional <a href='Loops.html#4611703575761697778'><font color='#'>loops</font></a> (while and until).
 Iteration is uniquely performed with the for statement, it can be performed on any collection&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> for x in (1 .. 3) a[x]&nbsp;:= a[x + 3]
 for x in <a href='Lists_comma Sets and Tuples.html#4611703575761536226'><font color='#'>list</font></a>{x in <a href='Classes.html#4611703575761317538'><font color='#'>class</font></a> | size(x.ancestors) &gt;= 4}
 	printf("~S <n",>x)
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> A collection here is taken in a very general sense, i.e., an <a href='Objects and Entities.html#4611703575761306018'><font color='#'>object</font></a> that can be seen as a <a href='Lists_comma Sets and Tuples.html#4611703575761536226'><font color='#'>set</font></a>
 through the enumeration <a href='Methods.html#4611703575761916626'><font color='#'>method</font></a> set!. This includes all CLAIRE <a href='Types.html#4611703575761920178'><font color='#'>types</font></a> but is <a href='Objects and Entities.html#4611703575763393826'><font color='#'>not</font></a> restricted since
 this <a href='Methods.html#4611703575761916626'><font color='#'>method</font></a> can be defined on <a href='Classes.html#4611703575763395122'><font color='#'>new</font></a> user <a href='Classes.html#4611703575761317538'><font color='#'>classes</font></a> that inherit from the collection root. For instance,
 set!(n:<a href='Integers and Floats.html#4611703575761301906'><font color='#'>integer</font></a>) returns the subset of (0 .. 29) that is represented by the <a href='Integers and Floats.html#4611703575761301906'><font color='#'>integer</font></a> n taken as
 a bit-vector. To tell CLAIRE that her <a href='Classes.html#4611703575763395122'><font color='#'>new</font></a> <a href='Classes.html#4611703575761317538'><font color='#'>class</font></a> is a collection, the user must define it as a
 subclass of collection. If x is a collection, then&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> for z in x ...

 (z <a href='Types.html#4611703575763199298'><font color='#'>%</font></a> x)
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> are supported. When defining a <a href='Classes.html#4611703575763395122'><font color='#'>new</font></a> subclass of collection, the <a href='Methods.html#4611703575761916626'><font color='#'>methods</font></a> set! and <a href='Types.html#4611703575763199298'><font color='#'>%</font></a> must be
 defined for this <a href='Classes.html#4611703575763395122'><font color='#'>new</font></a> <a href='Classes.html#4611703575761317538'><font color='#'>class</font></a>, and it is also advisable to define size and <a href='Iterations.html#4611703575762389474'><font color='#'>iterate</font></a> to <a href='Classes.html#4611703575763256274'><font color='#'>get</font></a> compiler
 speed-ups (if size is <a href='Objects and Entities.html#4611703575763393826'><font color='#'>not</font></a> defined, an implicit <a href='Calls and Slot Access.html#4611703575763319538'><font color='#'>call</font></a> to set! is made). Other collection handling
 <a href='Methods.html#4611703575761916626'><font color='#'>methods</font></a>, such as <a href='Classes.html#4611703575763256562'><font color='#'>add</font></a>, <a href='Classes.html#4611703575763256770'><font color='#'>delete</font></a>, etc may be defined freely if needed.</p><p align='justify' class='doc_paragraph'> Notice that it is possible that the expression being evaluated inside the loop modifies the
 <a href='Lists_comma Sets and Tuples.html#4611703575761536226'><font color='#'>set</font></a> itself, such as in&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> for x in {y in S | P(y)} P(x)&nbsp;:= false
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> Because the CLAIRE compiler tries to optimize iteration using lazy evaluation, there is no
 guarantee about the result of the previous statement. In this case, it is necessary to use an
 explicit <a href='Strings.html#4611703575763164066'><font color='#'>copy</font></a> as follows&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> for x in <a href='Strings.html#4611703575763164066'><font color='#'>copy</font></a>({y in S | P(y)}) P(x)&nbsp;:= false
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> The iteration control structure plays a major role in CLAIRE. It is possible to optimize its
 behavior by telling CLAIRE how to <a href='Iterations.html#4611703575762389474'><font color='#'>iterate</font></a> a <a href='Classes.html#4611703575763395122'><font color='#'>new</font></a> subclass (C) of collection. This is done through
 adding a <a href='Classes.html#4611703575763395122'><font color='#'>new</font></a> restriction of the <a href='Selectors_comma Properties and Operations.html#4611703575762381458'><font color='#'>property</font></a> <a href='Iterations.html#4611703575762389474'><font color='#'>iterate</font></a> for this <a href='Classes.html#4611703575761317538'><font color='#'>class</font></a> C, which tells how to <a href='Calls and Slot Access.html#4611703575763890978'><font color='#'>apply</font></a> a given
 expression to all members of an instance of C. This may avoid the explicit construction of the
 equivalent <a href='Lists_comma Sets and Tuples.html#4611703575761536226'><font color='#'>set</font></a> which is performed through the set! <a href='Methods.html#4611703575761916626'><font color='#'>method</font></a>.</p><p align='justify' class='doc_paragraph'> Conditional <a href='Loops.html#4611703575761697778'><font color='#'>loops</font></a> are also standard (the exiting condition is executed before each loop in a while
 and after each loop in a until),
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> while (x &gt; 0) x&nbsp;:+ 1
 until (x = 12) x&nbsp;:+ 1
 while <a href='Objects and Entities.html#4611703575763393826'><font color='#'>not</font></a>(i = size(l))
 	(l[i]&nbsp;:= 1, i&nbsp;:+ 1)
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> The value of a loop is false. However, <a href='Loops.html#4611703575761697778'><font color='#'>loops</font></a> can be exited with the break(x) instruction, in which
 case the return value is the value of x&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> for x in <a href='Classes.html#4611703575761317538'><font color='#'>class</font></a> (if (x <a href='Types.html#4611703575763199298'><font color='#'>%</font></a> subtype[<a href='Integers and Floats.html#4611703575761301906'><font color='#'>integer</font></a>]) break(x))
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> There is one restriction with the use of break: it cannot be used to <a href='Strings.html#4611703575763166610'><font color='#'>escape</font></a> from a try ... catch
 <a href='Blocks.html#4611703575761540002'><font color='#'>block</font></a>. This situation will provoke an <a href='Exception Handling.html#4611703575761850354'><font color='#'>error</font></a> at compile-time.</p></body>
	</html>