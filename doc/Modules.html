<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="doc.css" media="all">
		<title>
			claire : Modules
		</title>
		<style>
body {
        font-size: 14px;
        font-family: arial, Helvetica;
}

h1 { font-size: 25px; }
h2 { font-size: 20px; }

a[href] {
	border-bottom: 1px dotted grey;
	text-decoration: none
}

.doc_paragraph
{
        font-size: 14px;
        font-family: arial, helvetica;
}

.item_header { font-size: 10px; page-break-before: avoid; page-break-inside: avoid; page-break-after: avoid }

.item_index {
		white-space: pre;
        font-size: 11px;
        font-family: monaco, courier, mono-space;
}

.table_code {
		margin: 10px auto;
}

.doc_code {
    white-space: pre;
		padding-top: .1em;
		padding-bottom: .5em;
		background-color: #EEE;
		border: #AAA solid 1px;
        font-size: 11px;
        font-family: monaco, courier, mono-space;
}

.opt_usage {
		margin-left: 1em;
		margin-right: 1em;
		padding: .2em;
		background-color: #EEE;
		border: #AAA solid 1px;
        font-family: monaco, courier, mono-space;
	
}

.class_proto {
	vertical-align: top;
	text-align: right;
}

.class_proto_super {
	vertical-align: top;
	text-align: right;
}

.class_proto_slot {
	vertical-align: top;
	text-align: left;
}

</style>
	</head>
	<body><table width='100%' class='item_header'>
		<tr>
			<td width='33%' align='left' valign='bottom'><i><a href='Symbols.html#4611703562330752450'>Symbols</a></i></td>
			<td width='33%' align='center' valign='top'><i><a href='claire.index.html#__category_index__'>categories</a><br/><a href='claire.index.html#4611703562330381162'>I/O, Modules and System Interface</a><br/><b>Modules</b>
				</i></td>
			<td width='33%' align='right' valign='bottom'><i><a href='Global Variables and Constants.html#4611703562330797874'>Global Variables and Constants</a></i></td>
		</tr>
	</table>
	<h2><span class=pretitle>&nbsp;</span>&nbsp;<a name='4611703562330762722'>Modules</a>
			</h2>
	<ul></ul><ul><li><font font-face='Courier' class='item_index'><a href='Modules.html#4611703562330901474'>begin</a>(<font color='green'>m</font><font color='blue'>:</font>module)<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='Modules.html#4611703562330901554'>end</a>(<font color='green'>m</font><font color='blue'>:</font>module)<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='Modules.html#4611703562330924242'>module!</a>()<font color='blue'> -&gt; </font>module</font></li><li><font font-face='Courier' class='item_index'><a href='Modules.html#4611703562330924306'>module!</a>(<font color='green'>r</font><font color='blue'>:</font>restriction)<font color='blue'> -&gt; </font>module</font></li></ul><p align='justify' class='doc_paragraph'> Organizing software into modules is a key aspect of software engineering&nbsp;: modules
 separate different <a href='Features.html#4611703562329008834'><font color='#'>features</font></a> as well as different levels of abstraction for a given task.
 To avoid messy designs and to encourage modular programming, programs can be structured into
 modules, which all have their own <a href='Symbols.html#4611703562330752450'><font color='#'>identifiers</font></a> and may hide them to other modules. A module is
 thus a namespace that can be visible or hidden for other modules. CLAIRE supports multiple
 namespaces, organized into a hierarchy similar to the unix <a href='Communication ports.html#4611703562330381170'><font color='#'>file</font></a> system. The root of the
 hierarchy is the module CLAIRE, which is implicit. A module is defined as a usual CLAIRE
 <a href='Objects and Entities.html#4611703562329047202'><font color='#'>object</font></a> with two important <a href='Calls and Slot Access.html#4611703562329242514'><font color='#'>slots</font></a>: part_of which contains the name of the father module, and
 a <a href='Calls and Slot Access.html#4611703562329242514'><font color='#'>slot</font></a> uses which gives the <a href='Lists_comma Sets and Tuples.html#4611703562329258978'><font color='#'>list</font></a> of all modules that can be used inside the <a href='Classes.html#4611703562331136306'><font color='#'>new</font></a> module. For
 instance&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> <a href='Methods.html#4611703562330917794'><font color='#'>interface</font></a>&nbsp;:: module(part_of = library, uses = <a href='Lists_comma Sets and Tuples.html#4611703562329258978'><font color='#'>list</font></a>(claire))
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> defines <a href='Methods.html#4611703562330917794'><font color='#'>interface</font></a> as a <a href='Classes.html#4611703562331136306'><font color='#'>new</font></a> sub-module to the library module that uses the module claire
 (which implies using all the modules). All module names belong to the claire namespace
 (they are shared) for the sake of simplicity.
 </p>
									<table align='center' width='80%'>
									<tr><td><p align='justify' class='doc_paragraph'>
										<b>Definition : </b><i>A module is a CLAIRE <a href='Objects and Entities.html#4611703562329047202'><font color='#'>object</font></a> that represents a namespace. A namespace is a <a href='Lists_comma Sets and Tuples.html#4611703562329258978'><font color='#'>set</font></a> of <a href='Symbols.html#4611703562330752450'><font color='#'>identifiers</font></a>&nbsp;:
 each <a href='Symbols.html#4611703562330752450'><font color='#'>identifier</font></a> (a <a href='Symbols.html#4611703562330752450'><font color='#'>symbol</font></a> representing the name of an <a href='Objects and Entities.html#4611703562329047202'><font color='#'>object</font></a>) belongs to one unique namespace,
 but is visible in many namespaces. Namespaces allow the use of the same name for two different
 <a href='Objects and Entities.html#4611703562329047202'><font color='#'>objects</font></a> in two different modules. Modules are organized into a visibility hierarchy so that each
 <a href='Symbols.html#4611703562330752450'><font color='#'>symbol</font></a> defined in a module m is visible in modules that are children of m.
 </i></p></td></tr></table>
									<p align='justify' class='doc_paragraph'> <a href='Symbols.html#4611703562330752450'><font color='#'>Identifiers</font></a> always belong to the namespace in which they are created (claire by default).
 The instruction <a href='Modules.html#4611703562330924306'><font color='#'>module!</font></a>() returns the module currently opened. To change to a <a href='Classes.html#4611703562331136306'><font color='#'>new</font></a> module, one may
 use <a href='Modules.html#4611703562330901474'><font color='#'>begin</font></a>(m:module) and <a href='Modules.html#4611703562330901554'><font color='#'>end</font></a>(m:module). The instruction <a href='Modules.html#4611703562330901474'><font color='#'>begin</font></a>(m) makes m the current module.
 Each newly created <a href='Symbols.html#4611703562330752450'><font color='#'>identifier</font></a> (<a href='Symbols.html#4611703562330752450'><font color='#'>symbol</font></a>) will belong to the module m, until <a href='Modules.html#4611703562330901554'><font color='#'>end</font></a>(m) resumes to the
 original module. For instance, we may define&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> <a href='Modules.html#4611703562330901474'><font color='#'>begin</font></a>(<a href='Methods.html#4611703562330917794'><font color='#'>interface</font></a>)
 window &lt;: <a href='Objects and Entities.html#4611703562329047202'><font color='#'>object</font></a>(...)
 <a href='Modules.html#4611703562330901554'><font color='#'>end</font></a>(<a href='Methods.html#4611703562330917794'><font color='#'>interface</font></a>)
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> This creates the <a href='Symbols.html#4611703562330752450'><font color='#'>identifier</font></a> <a href='Methods.html#4611703562330917794'><font color='#'>interface</font></a>/window. Each <a href='Symbols.html#4611703562330752450'><font color='#'>identifier</font></a> needs to be preceded by its module,
 unless it belongs to the current module or one of its descendent, or unless it is private
 (cf. visibility <a href='Rules.html#4611703562330281586'><font color='#'>rules</font></a>). We <a href='Calls and Slot Access.html#4611703562331060722'><font color='#'>call</font></a> the short form "window" the unqualified <a href='Symbols.html#4611703562330752450'><font color='#'>identifier</font></a> and the long
 one "<a href='Methods.html#4611703562330917794'><font color='#'>interface</font></a>/window" the qualified <a href='Symbols.html#4611703562330752450'><font color='#'>identifier</font></a>.</p><p align='justify' class='doc_paragraph'> The visibility <a href='Rules.html#4611703562330281586'><font color='#'>rules</font></a> among name spaces are as follows&nbsp;:
 </p>
							  <ul> <li>unqualified <a href='Symbols.html#4611703562330752450'><font color='#'>identifiers</font></a> are visible if and only if they belong to a descendent of the
 current module
 <li>all qualified <a href='Symbols.html#4611703562330752450'><font color='#'>identifiers</font></a> that are private are <a href='Objects and Entities.html#4611703562331135010'><font color='#'>not</font></a> visible
 <li>other qualified <a href='Symbols.html#4611703562330752450'><font color='#'>identifiers</font></a> are visible everywhere, but the compiler will complain if their
 module of origin does <a href='Objects and Entities.html#4611703562331135010'><font color='#'>not</font></a> belong to the <a href='Lists_comma Sets and Tuples.html#4611703562329258978'><font color='#'>list</font></a> of allowed modules of the current modules
 </ul>
							  <p align='justify' class='doc_paragraph'> Any <a href='Symbols.html#4611703562330752450'><font color='#'>identifier</font></a> can be made private when it is defined by prefixing it with private/. For instance,
 we could have written&nbsp;:
 </p><table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'> <a href='Modules.html#4611703562330901474'><font color='#'>begin</font></a>(<a href='Methods.html#4611703562330917794'><font color='#'>interface</font></a>)
 window &lt;: <a href='Objects and Entities.html#4611703562329047202'><font color='#'>object</font></a>(...)
 private/temporary &lt;: window(...)
 <a href='Modules.html#4611703562330901554'><font color='#'>end</font></a>(<a href='Methods.html#4611703562330917794'><font color='#'>interface</font></a>)
</td></tr></table>
							  <p align='justify' class='doc_paragraph'> The declaration private/temporary makes "temporary" a private <a href='Symbols.html#4611703562330752450'><font color='#'>identifier</font></a> that cannot be
 accessed outside the module <a href='Methods.html#4611703562330917794'><font color='#'>interface</font></a> (or one of its descendents). The declaration claire/window
 makes window an <a href='Symbols.html#4611703562330752450'><font color='#'>identifier</font></a> from the claire module (thus it is visible everywhere), which is
 allowed since claire belongs to the <a href='Lists_comma Sets and Tuples.html#4611703562329258978'><font color='#'>list</font></a> of usable modules for <a href='Methods.html#4611703562330917794'><font color='#'>interface</font></a>.</p><p align='justify' class='doc_paragraph'> In practice, there is almost always a <a href='Lists_comma Sets and Tuples.html#4611703562329258978'><font color='#'>set</font></a> of <a href='Communication ports.html#4611703562330381170'><font color='#'>files</font></a> that we want to associate with a module,
 which means that we want to load into the module's namespace. CLAIRE allows an explicit
 representation of this through the <a href='Calls and Slot Access.html#4611703562329242514'><font color='#'>slots</font></a> made_of and source. made_of(m) is the <a href='Lists_comma Sets and Tuples.html#4611703562329258978'><font color='#'>list</font></a> of
 <a href='Communication ports.html#4611703562330381170'><font color='#'>files</font></a> (described as <a href='Strings.html#4611703562329046802'><font color='#'>strings</font></a>) that we want to associate with the module and source(m) is the
 common directory (also described as a <a href='Strings.html#4611703562329046802'><font color='#'>string</font></a>). The benefits are the load/sload <a href='Methods.html#4611703562329657810'><font color='#'>methods</font></a>
 that provide automatic loading of the module's <a href='Communication ports.html#4611703562330381170'><font color='#'>files</font></a> into the <a href='Strings.html#4611703562330919602'><font color='#'>right</font></a> namespace and the module
 compiling <a href='Features.html#4611703562329008834'><font color='#'>features</font></a>. CLAIRE expects the <a href='Lists_comma Sets and Tuples.html#4611703562329258978'><font color='#'>set</font></a> of <a href='Communication ports.html#4611703562330381170'><font color='#'>file</font></a> names to be different from module names,
 otherwise a confusion may occur at compile <a href='Dates and Times.html#4611703562329044610'><font color='#'>time</font></a>.</p><p align='justify' class='doc_paragraph'> A <a href='Lists_comma Sets and Tuples.html#4611703562331141458'><font color='#'>last</font></a> important <a href='Calls and Slot Access.html#4611703562329242514'><font color='#'>slot</font></a> of a module is uses, a <a href='Lists_comma Sets and Tuples.html#4611703562329258978'><font color='#'>list</font></a> of other modules that the <a href='Classes.html#4611703562331136306'><font color='#'>new</font></a> module is
 allowed to use. This <a href='Lists_comma Sets and Tuples.html#4611703562329258978'><font color='#'>list</font></a> has two purposes, that only exist at compile <a href='Dates and Times.html#4611703562329044610'><font color='#'>time</font></a>. The first one is
 to restrict the importation of <a href='Symbols.html#4611703562330752450'><font color='#'>symbols</font></a> from other modules. A module is considered a legal import
 if it included itself in this uses <a href='Lists_comma Sets and Tuples.html#4611703562329258978'><font color='#'>list</font></a>, or, recursively, if its father module is legal or if the
 module is legal for one of the modules in this <a href='Lists_comma Sets and Tuples.html#4611703562329258978'><font color='#'>list</font></a>. An attempt to <a href='Classes.html#4611703562330997570'><font color='#'>read</font></a> a <a href='Symbols.html#4611703562330752450'><font color='#'>symbol</font></a> m/s from a module
 that is <a href='Objects and Entities.html#4611703562331135010'><font color='#'>not</font></a> a legal import will provoke a compiler <a href='Exception Handling.html#4611703562329608946'><font color='#'>error</font></a>. Second, this <a href='Lists_comma Sets and Tuples.html#4611703562329258978'><font color='#'>list</font></a> is used by the
 compiler to <a href='Strings.html#4611703562330912066'><font color='#'>find</font></a> out which binaries should be included in the <a href='File system.html#4611703562330919874'><font color='#'>link</font></a> script that is produced by
 the compiler.</p><a name='4611703562330901474'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='begin'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Modules.html#4611703562330762722'>Modules</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Kernel method</i></td>
	</tr></table><h3>begin(<font color='green'>m</font><font color='blue'>:</font>module)<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> <a href='Lists_comma Sets and Tuples.html#4611703562329258978'><font color='#'>Sets</font></a> the current namespace to the <a href='Modules.html#4611703562330762722'><font color='#'>module</font></a> <b>m</b>.</p><a name='4611703562330901554'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='end'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Modules.html#4611703562330762722'>Modules</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Kernel method</i></td>
	</tr></table><h3>end(<font color='green'>m</font><font color='blue'>:</font>module)<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> Pop the current namespace and restore the namespace that was active
 before the <a href='Calls and Slot Access.html#4611703562331060722'><font color='#'>call</font></a> to <a href='Modules.html#4611703562330901474'><font color='#'>begin</font></a>(<b>m</b>).</p><a name='4611703562330924242'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='module!'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Modules.html#4611703562330762722'>Modules</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Kernel method</i></td>
	</tr></table><h3>module!()<font color='blue'> -&gt; </font>module</h3><p align='justify' class='doc_paragraph'> module!() returns the current namespace (i.e. <a href='Modules.html#4611703562330762722'><font color='#'>module</font></a>).</p><a name='4611703562330924306'><hr size=0 style='page-break-after: avoid' /></a>
	<a name='module!'><hr size=0 /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='claire.index.html#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='Modules.html#4611703562330762722'>Modules</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Kernel method</i></td>
	</tr></table><h3>module!(<font color='green'>r</font><font color='blue'>:</font>restriction)<font color='blue'> -&gt; </font>module</h3><p align='justify' class='doc_paragraph'> module!(<b>r</b>) returns the <a href='Modules.html#4611703562330762722'><font color='#'>module</font></a> where the restriction <b>r</b> was created.</p></body>
	</html>